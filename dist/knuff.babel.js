"use strict";!function(t){var e=t.document,n=t.location.href,o=Element.prototype,a=Object.prototype,l={baseUrl:t.location.protocol+"//"+t.location.host+"/",selector:"[data-knuff]",onPop:null,onPush:null},c=function(t){t.state&&s&&l.onPop.call(t,t,t.state.knuff)},r=function(e){var n=e.target;if(!(!1===n.matches(l.selector)||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)){var o=n.getAttribute("data-knuff")||n.href||!1;o!==t.location.href&&!1!==o&&(e.preventDefault(),o=function(t){return t.substr(0,l.baseUrl.length)===l.baseUrl?t:l.baseUrl.replace(/\/*$/,"/")+t.replace(/^\/*/,"")}(o),t.history.pushState({knuff:o},null,o),u&&l.onPush.call(e,e,o))}},f=!1,s=!1,u=!1;void 0===o.matches&&(o.matches=o.msMatchesSelector||o.webkitMatchesSelector),t.knuff=function(o){f||(f=!0,function(t){if("[object Object]"===a.toString.call(t)){for(var e in t)a.hasOwnProperty.call(t,e)&&(l[e]=t[e]);"function"==typeof l.onPop&&(s=!0),"function"==typeof l.onPush&&(u=!0)}}(o),t.addEventListener("popstate",c),e.addEventListener("click",r),t.history.replaceState({knuff:n},null,n))}}(window);